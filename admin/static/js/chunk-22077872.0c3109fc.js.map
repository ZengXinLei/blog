{"version":3,"sources":["webpack:///./src/api/draft.js","webpack:///./src/api/article.js","webpack:///./src/views/charts/index.vue?a923","webpack:///./src/utils/parseTime.js","webpack:///./src/views/charts/index.vue?3c8f","webpack:///./src/components/Charts/MixChart.vue?d5da","webpack:///./src/components/Charts/mixins/resize.js","webpack:///./src/api/looked.js","webpack:///./src/api/tourist.js","webpack:///src/components/Charts/MixChart.vue","webpack:///./src/components/Charts/MixChart.vue?132c","webpack:///./src/components/Charts/MixChart.vue","webpack:///src/views/charts/index.vue","webpack:///./src/views/charts/index.vue?251f","webpack:///./src/views/charts/index.vue"],"names":["saveDrafts","data","cookieLogin","JSON","parse","getToken","request","url","method","getDraftList","start","offset","qs","stringify","deleteDraft","did","getDraftById","getDraftPages","getTimeCount","getArticleList","aType","getArticlePages","getArticleById","aId","saveArticle","article","deleteArticle","publishArticle","getArticleTimeCount","getAllType","parseTime","timestamp","t","Math","floor","Date","getTime","day_num","toJSON","substr","replace","hour","minute","computedTime","tmp","length","sort","p","m","n","a","b","end","i","day","push","splice","tmp_day","split","count","time","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticRenderFns","class","className","style","height","width","id","$_sidebarElm","$_resizeHandler","mounted","initListener","activated","resize","beforeDestroy","destroyListener","deactivated","methods","$_sidebarResizeHandler","e","propertyName","debounce","window","addEventListener","document","getElementsByClassName","removeEventListener","chart","getLookedTimeCount","getTouristTimeCount","component","name","components"],"mappings":"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","file":"static/js/chunk-22077872.0c3109fc.js","sourcesContent":["import request from '@/utils/request'\nimport qs from 'querystring'\nimport {cookieLogin} from \"@/api/user\";\nimport {getToken} from \"@/utils/auth\";\n\nexport function saveDrafts(data) {\n  cookieLogin(JSON.parse(getToken()))\n  return request({\n    url:\"/saveDrafts\",\n    method:\"post\",\n    data:data\n  })\n\n}\nexport function getDraftList(start,offset) {\n  cookieLogin(JSON.parse(getToken()))\n  return request({\n    url:\"/getDraftList\",\n    method:\"post\",\n    data:qs.stringify({\n      start:start,\n      offset:offset\n    })\n  })\n\n}\nexport function deleteDraft(did) {\n  cookieLogin(JSON.parse(getToken()))\n  return request({\n    url: \"/deleteDraft\",\n    method: \"post\",\n    data: qs.stringify({\n      did: did\n    })\n  })\n}\n\n\nexport function getDraftById(did) {\n  cookieLogin(JSON.parse(getToken()))\n  return request({\n    url:'/getDraftById',\n    method:\"post\",\n    data:qs.stringify({\n      did:did\n    })\n  })\n}\nexport function getDraftPages() {\n  cookieLogin(JSON.parse(getToken()))\n  return request({\n    url:'/getDraftPages',\n    method:'post',\n\n  })\n}\n\nexport function getTimeCount() {\n  cookieLogin(JSON.parse(getToken()))\n  return request({\n    url:'/getTimeCount',\n    method:'post',\n\n  })\n}\n","import request from '@/utils/request'\nimport qs from 'querystring'\nimport {cookieLogin} from \"@/api/user\";\nimport {getToken} from \"@/utils/auth\";\nexport function getArticleList(start,offset) {\n  cookieLogin(JSON.parse(getToken()))\n  return request({\n    url:\"/getArticleList\",\n    method:\"post\",\n    data:qs.stringify({\n      start:start,\n      offset:offset,\n      aType:\"\"\n    })\n  })\n\n}\n\nexport function getArticlePages() {\n  return request({\n    url:\"/getArticlePages\",\n    method:\"post\",\n    data:qs.stringify({\n      aType:\"\"\n    })\n\n  })\n}\nexport function getArticleById(aId) {\n  cookieLogin(JSON.parse(getToken()))\n  return request({\n    url:\"/getArticleById\",\n    method:\"post\",\n    data:qs.stringify({\n      aId:aId\n    })\n  })\n}\n\nexport function saveArticle(article) {\n  cookieLogin(JSON.parse(getToken()))\n  return request({\n    url:\"/saveArticle\",\n    method:\"post\",\n    data:article\n  })\n}\nexport function deleteArticle(aId) {\n  cookieLogin(JSON.parse(getToken()))\n  return request({\n    url:\"/deleteArticle\",\n    method:\"post\",\n    data:qs.stringify({\n      aId:aId\n    })\n  })\n\n}\n\nexport function publishArticle(article) {\n  cookieLogin(JSON.parse(getToken()))\n  return request({\n    url:\"/publishArticle\",\n    method:\"post\",\n    data:article\n  })\n\n}\n\nexport function getArticleTimeCount() {\n  cookieLogin(JSON.parse(getToken()))\n  return request({\n    url:'/getArticleTimeCount',\n    method:'post',\n\n  })\n}\n\n\nexport function getAllType() {\n\n  return request({\n    url:\"/getAllType\",\n    method:\"post\"\n  })\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=55c366c4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=55c366c4&scoped=true&lang=css&\"","export  function parseTime(timestamp) {\n\n  let t=Math.floor(new Date().getTime()/1000)\n\n  t=t-timestamp\n  let day_num=Math.floor(t/(24 * 3600 ))\n  if(day_num>=1){\n    if(day_num>30){\n      // let time=new Date(timestamp)\n      // let tt=time.getFullYear()+\"-\"+(time.getMonth()+1)+\"-\"+time.getDate()+\" \"+time.getHours()+\":\"+time.getMinutes()\n      // return tt\n      return new Date(timestamp*1000+ 8 * 3600 * 1000).toJSON().substr(0, 19).replace('T', ' ')\n    }\n    if(day_num===1){\n      return \"昨天\"\n    }else if (day_num===2){\n      return \"前天\"\n    }\n    return day_num+\"天前\"\n\n  }\n  let hour=Math.floor(t/(3600))\n  if(hour>=1){\n    return hour+\"小时前\"\n  }\n  let minute=Math.floor(t/(60))\n\n  if(minute>=1){\n    return minute+\"分钟前\"\n  }\n  return \"刚刚\"\n}\n\n\nexport function computedTime(data) {\n  let tmp=[]\n  if(data.length===0){\n    return []\n  }\n  data.sort((function (p) {\n    return function (m, n) {\n      let a = new Date(m[p].replace(/-/g, '/')).getTime() / 1000\n      let b = new Date(n[p].replace(/-/g, '/')).getTime() / 1000\n      return a - b\n    }\n  })('time'))\n\n  let start = new Date(data[0]['time'].replace(/-/g, '/')).getTime() / 1000\n  let end = new Date().getTime() / 1000\n\n\n  for (let i = 0; i <= (end - start) / (3600 * 24); i++) {\n    let day = start + i * (3600 * 24)\n\n    if (data.length!==0&&new Date(data[0]['time'].replace(/-/g, '/')).getTime() / 1000 === day) {\n      tmp.push(data[0])\n\n      data.splice(0,1)\n    }else {\n      //1591590336\n      // debugger\n      let tmp_day=new Date(day*1000+ 8 * 3600 * 1000).toJSON().substr(0, 19).replace('T', ' ').split(\" \")[0]\n      // let tmp_day=new Date(parseInt(data) * 1000).toLocaleString().replace(/:\\d{1,2}$/,' ');\n      tmp.push({\n        count:0,\n        time:tmp_day\n\n      })\n      // debugger\n    }\n  }\n\n  return tmp\n}\n\n\n\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chart-container\"},[_c('chart',{attrs:{\"height\":\"100%\",\"width\":\"100%\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.className,style:({height:_vm.height,width:_vm.width}),attrs:{\"id\":_vm.id}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { debounce } from '@/utils'\n\nexport default {\n  data() {\n    return {\n      $_sidebarElm: null,\n      $_resizeHandler: null\n    }\n  },\n  mounted() {\n    this.initListener()\n  },\n  activated() {\n    if (!this.$_resizeHandler) {\n      // avoid duplication init\n      this.initListener()\n    }\n\n    // when keep-alive chart activated, auto resize\n    this.resize()\n  },\n  beforeDestroy() {\n    this.destroyListener()\n  },\n  deactivated() {\n    this.destroyListener()\n  },\n  methods: {\n    // use $_ for mixins properties\n    // https://vuejs.org/v2/style-guide/index.html#Private-property-names-essential\n    $_sidebarResizeHandler(e) {\n      if (e.propertyName === 'width') {\n        this.$_resizeHandler()\n      }\n    },\n    initListener() {\n      this.$_resizeHandler = debounce(() => {\n        this.resize()\n      }, 100)\n      window.addEventListener('resize', this.$_resizeHandler)\n\n      this.$_sidebarElm = document.getElementsByClassName('sidebar-container')[0]\n      this.$_sidebarElm && this.$_sidebarElm.addEventListener('transitionend', this.$_sidebarResizeHandler)\n    },\n    destroyListener() {\n      window.removeEventListener('resize', this.$_resizeHandler)\n      this.$_resizeHandler = null\n\n      this.$_sidebarElm && this.$_sidebarElm.removeEventListener('transitionend', this.$_sidebarResizeHandler)\n    },\n    resize() {\n      const { chart } = this\n      chart && chart.resize()\n    }\n  }\n}\n","import request from '@/utils/request'\nimport qs from 'querystring'\nimport {cookieLogin} from \"@/api/user\";\nimport {getToken} from \"@/utils/auth\";\n\nexport function getLookedTimeCount() {\n  cookieLogin(JSON.parse(getToken()))\n  return request({\n    url:\"/getLookedTimeCount\",\n    method:\"post\"\n  })\n}\n","import request from '@/utils/request'\nimport qs from 'querystring'\nimport {cookieLogin} from \"@/api/user\";\nimport {getToken} from \"@/utils/auth\";\n\nexport function getTouristTimeCount() {\n  cookieLogin(JSON.parse(getToken()))\n  return request({\n    url:\"/getTouristTimeCount\",\n    method:\"post\"\n  })\n}\n","<template>\n  <div :id=\"id\" :class=\"className\" :style=\"{height:height,width:width}\"/>\n</template>\n\n<script>\n  import echarts from 'echarts'\n  import resize from './mixins/resize'\n  import {getTimeCount} from \"@/api/draft\";\n  import {computedTime} from \"@/utils/parseTime\";\n  import {getArticleTimeCount} from \"@/api/article\";\n  import {getLookedTimeCount} from '@/api/looked'\n  import {parseTime} from \"@/utils/parseTime\";\n  import {getTouristTimeCount} from \"@/api/tourist\";\n\n  export default {\n    mixins: [resize],\n    props: {\n      className: {\n        type: String,\n        default: 'chart'\n      },\n      id: {\n        type: String,\n        default: 'chart'\n      },\n      width: {\n        type: String,\n        default: '200px'\n      },\n      height: {\n        type: String,\n        default: '200px'\n      }\n    },\n    data() {\n      return {\n        chart: null,\n        draft:[],\n        article:[],\n        looked:[],\n        tourist:[],\n        chartInfo:[]\n      }\n    },\n    mounted() {\n\n\n      new Promise((r,j)=>{\n        getTimeCount().then(res => {\n          this.draft=computedTime(res.data)\n          //console.log(1)\n          r()\n        })\n      }).\n        then(()=>{\n          return new Promise((r,j)=>{\n            getArticleTimeCount().then(res=>{\n              this.article=computedTime(res.data)\n              //console.log(2)\n              r()\n            })\n          })\n      }).\n        then(()=>{\n          return new Promise((r,j)=>{\n\n            getLookedTimeCount().then(res=>{\n\n              this.looked=computedTime(res.data)\n              r()\n            })\n          })\n      }).\n        then(()=>{\n          return new Promise((r,j)=>{\n            getTouristTimeCount().then(res=>{\n              this.tourist=computedTime(res.data)\n\n\n              r()\n            })\n          })\n      }).\n      then(()=>{\n        this.dealArr()\n        this.initChart()\n      })\n\n\n    },\n    beforeDestroy() {\n      if (!this.chart) {\n        return\n      }\n      this.chart.dispose()\n      this.chart = null\n    },\n    methods: {\n      dealArr(){\n        let l=Math.max(this.article.length,this.draft.length,this.looked.length,this.tourist.length)\n\n        this.fillArr(this.article,l)\n        this.fillArr(this.draft,l)\n        this.fillArr(this.looked,l)\n        this.fillArr(this.tourist,l)\n      },\n      fillArr(arr,len){\n        if(arr.length===len){\n          return\n        }\n        let n=len - arr.length\n        for (let i = 0; i < n; i++) {\n          let t=arr[0]['time']\n          let t1=new Date(t.split(\"-\")).getTime()\n          t1=t1-60*60*24*1000\n          t=new Date(t1 + 8 * 3600 * 1000)\n          t=t.toJSON().substr(0, 19).replace('T', ' ').split(\" \")[0]\n          arr.unshift({\n            count:0,\n            time:t\n          })\n        }\n\n\n      },\n\n      initChart() {\n        // let t=\"2020-06-19\"\n        // //console.log(parseTime(new Date(t.split(\"-\")).getTime()/1000))\n\n        let a=this.article\n        let d=this.draft\n        let l=this.looked\n        let t=this.tourist\n        this.chart = echarts.init(document.getElementById(this.id))\n        const xData = (function(){\n          // debugger\n          const data = []\n          for (let i = 0; i < a.length; i++) {\n            a[i]['time']=parseTime(new Date(a[i]['time'].split(\"-\")).getTime()/1000)\n            if(a[i]['time'].indexOf(\"分钟\")>0||a[i]['time']===\"刚刚\"||a[i]['time'].indexOf(\"小时\")>0){\n              a[i]['time']=\"今天\"\n            }\n            data.push(a[i]['time'])\n          }\n          return data\n        }())\n        const article=(function() {\n          let data=[]\n          for (let i = 0; i < a.length; i++) {\n            data.push(a[i]['count'])\n          }\n          return data\n        }())\n\n        const draft=(function() {\n          let data=[]\n\n          for (let i = 0; i <d.length; i++) {\n            data.push(d[i]['count'])\n          }\n          return data\n        }())\n\n        const looked=(function () {\n          let data=[]\n\n          for (let i = 0; i <d.length; i++) {\n            data.push(l[i]['count'])\n          }\n          return data\n        }())\n        const tourist=(function () {\n          let data=[]\n\n          for (let i = 0; i <d.length; i++) {\n            data.push(t[i]['count'])\n          }\n          return data\n        }())\n        //console.log(looked)\n        this.chart.setOption({\n          backgroundColor: '#344b58',\n          title: {\n            text: '博客数据',\n            x: '20',\n            top: '20',\n            textStyle: {\n              color: '#fff',\n              fontSize: '22'\n            },\n            subtextStyle: {\n              color: '#90979c',\n              fontSize: '16'\n            }\n          },\n          tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n              textStyle: {\n                color: '#fff'\n              }\n            }\n          },\n          grid: {\n            left: '5%',\n            right: '5%',\n            borderWidth: 0,\n            top: 150,\n            bottom: 95,\n            textStyle: {\n              color: '#fff'\n            }\n          },\n          legend: {\n            x: '5%',\n            top: '10%',\n            textStyle: {\n              color: '#90979c'\n            },\n            data: ['已发布', '未发布','当天访问量','当天游客注册量']\n          },\n          calculable: true,\n          xAxis: [{\n            type: 'category',\n            axisLine: {\n              lineStyle: {\n                color: '#90979c'\n              }\n            },\n            splitLine: {\n              show: false\n            },\n            axisTick: {\n              show: false\n            },\n            splitArea: {\n              show: false\n            },\n            axisLabel: {\n              interval: 0\n\n            },\n            data: xData\n          }],\n          yAxis: [{\n            type: 'value',\n            splitLine: {\n              show: false\n            },\n            axisLine: {\n              lineStyle: {\n                color: '#90979c'\n              }\n            },\n            axisTick: {\n              show: false\n            },\n            axisLabel: {\n              interval: 0\n            },\n            splitArea: {\n              show: false\n            }\n          }],\n          dataZoom: [{\n            show: true,\n            height: 30,\n            xAxisIndex: [\n              0\n            ],\n            bottom: 30,\n            start: 10,\n            end: 80,\n            handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',\n            handleSize: '110%',\n            handleStyle: {\n              color: '#d3dee5'\n\n            },\n            textStyle: {\n              color: '#fff'\n            },\n            borderColor: '#90979c'\n\n          }, {\n            type: 'inside',\n            show: true,\n            height: 15,\n            start: 1,\n            end: 35\n          }],\n          series: [\n            {\n            name: '已发布',\n            type: 'bar',\n            stack: 'total',\n            barMaxWidth: 35,\n            barGap: '10%',\n            itemStyle: {\n              normal: {\n                color: 'rgba(255,144,128,1)',\n                label: {\n                  show: true,\n                  textStyle: {\n                    color: '#fff'\n                  },\n                  position: 'insideTop',\n                  formatter(p) {\n                    return p.value > 0 ? p.value : ''\n                  }\n                }\n              }\n            },\n            data: article\n          },\n\n            {\n              name: '未发布',\n              type: 'bar',\n              stack: 'total',\n              itemStyle: {\n                normal: {\n                  color: 'rgba(0,191,183,1)',\n                  barBorderRadius: 0,\n                  label: {\n                    show: true,\n                    position: 'top',\n                    formatter(p) {\n                      return p.value > 0 ? p.value : ''\n                    }\n                  }\n                }\n              },\n              data: draft\n            },\n            {\n              name: '当天访问量',\n              type: 'line',\n              stack: 'total',\n              symbolSize: 10,\n              symbol: 'circle',\n              itemStyle: {\n                normal: {\n                  color: 'rgb(252,230,48)',\n                  barBorderRadius: 0,\n                  label: {\n                    show: true,\n                    position: 'top',\n                    formatter(p) {\n                      return p.value > 0 ? p.value : ''\n                    }\n                  }\n                }\n              },\n              data: looked\n            },\n            {\n              name: '当天游客注册量',\n              type: 'line',\n              stack: 'total',\n              symbolSize: 10,\n              symbol: 'circle',\n              itemStyle: {\n                normal: {\n                  color: 'rgb(236,7,7)',\n                  barBorderRadius: 0,\n                  label: {\n                    show: true,\n                    position: 'top',\n                    formatter(p) {\n                      return p.value > 0 ? p.value : ''\n                    }\n                  }\n                }\n              },\n              data: tourist\n            }\n          ]\n        })\n      }\n    }\n  }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MixChart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MixChart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MixChart.vue?vue&type=template&id=750f2186&\"\nimport script from \"./MixChart.vue?vue&type=script&lang=js&\"\nexport * from \"./MixChart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"chart-container\">\n    <chart height=\"100%\" width=\"100%\" />\n  </div>\n</template>\n\n<script>\nimport Chart from '@/components/Charts/MixChart'\n\nexport default {\n  name: 'MixChart',\n  components: { Chart }\n}\n</script>\n\n<style scoped>\n.chart-container{\n  position: relative;\n  width: 100%;\n  height: calc(100vh - 50px);\n}\n</style>\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=55c366c4&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=55c366c4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"55c366c4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}