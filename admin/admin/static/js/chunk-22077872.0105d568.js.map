{"version":3,"sources":["webpack:///./src/api/draft.js","webpack:///./src/api/article.js","webpack:///./src/views/charts/index.vue?a923","webpack:///./src/utils/parseTime.js","webpack:///./src/views/charts/index.vue?a237","webpack:///./src/components/Charts/MixChart.vue?ca93","webpack:///./src/components/Charts/mixins/resize.js","webpack:///./src/api/tourist.js","webpack:///./src/api/looked.js","webpack:///src/components/Charts/MixChart.vue","webpack:///./src/components/Charts/MixChart.vue?132c","webpack:///./src/components/Charts/MixChart.vue","webpack:///src/views/charts/index.vue","webpack:///./src/views/charts/index.vue?251f","webpack:///./src/views/charts/index.vue"],"names":["saveDrafts","data","cookieLogin","JSON","parse","getToken","request","url","method","getDraftList","start","offset","qs","stringify","deleteDraft","did","getDraftById","getDraftPages","getTimeCount","getArticleList","aType","getArticlePages","getArticleById","aId","saveArticle","article","deleteArticle","publishArticle","getArticleTimeCount","getAllType","parseTime","timestamp","t","Math","floor","Date","getTime","day_num","toJSON","substr","replace","hour","minute","computedTime","tmp","length","sort","p","m","n","a","b","end","i","day","push","splice","tmp_day","split","count","time","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticRenderFns","class","className","style","height","width","id","$_sidebarElm","$_resizeHandler","mounted","initListener","activated","resize","beforeDestroy","destroyListener","deactivated","methods","$_sidebarResizeHandler","e","propertyName","debounce","window","addEventListener","document","getElementsByClassName","removeEventListener","chart","getTouristTimeCount","getLookedTimeCount","mixins","props","type","String","default","draft","tourist","looked","chartInfo","Promise","resolve","then","dispose","initChart","d","l","setOption","backgroundColor","title","text","x","top","textStyle","color","fontSize","subtextStyle","tooltip","trigger","axisPointer","grid","left","right","borderWidth","bottom","legend","calculable","xAxis","yAxis","dataZoom","series","polishing","arr","forEach","max","console","log","component","name","components"],"mappings":"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","file":"admin/static/js/chunk-22077872.0105d568.js","sourcesContent":["import request from '@/utils/request'\r\nimport qs from 'querystring'\r\nimport {cookieLogin} from \"@/api/user\";\r\nimport {getToken} from \"@/utils/auth\";\r\n\r\nexport function saveDrafts(data) {\r\n  cookieLogin(JSON.parse(getToken()))\r\n  return request({\r\n    url:\"/saveDrafts\",\r\n    method:\"post\",\r\n    data:data\r\n  })\r\n\r\n}\r\nexport function getDraftList(start,offset) {\r\n  cookieLogin(JSON.parse(getToken()))\r\n  return request({\r\n    url:\"/getDraftList\",\r\n    method:\"post\",\r\n    data:qs.stringify({\r\n      start:start,\r\n      offset:offset\r\n    })\r\n  })\r\n\r\n}\r\nexport function deleteDraft(did) {\r\n  cookieLogin(JSON.parse(getToken()))\r\n  return request({\r\n    url: \"/deleteDraft\",\r\n    method: \"post\",\r\n    data: qs.stringify({\r\n      did: did\r\n    })\r\n  })\r\n}\r\n\r\n\r\nexport function getDraftById(did) {\r\n  cookieLogin(JSON.parse(getToken()))\r\n  return request({\r\n    url:'/getDraftById',\r\n    method:\"post\",\r\n    data:qs.stringify({\r\n      did:did\r\n    })\r\n  })\r\n}\r\nexport function getDraftPages() {\r\n  cookieLogin(JSON.parse(getToken()))\r\n  return request({\r\n    url:'/getDraftPages',\r\n    method:'post',\r\n\r\n  })\r\n}\r\n\r\nexport function getTimeCount() {\r\n  cookieLogin(JSON.parse(getToken()))\r\n  return request({\r\n    url:'/getTimeCount',\r\n    method:'post',\r\n\r\n  })\r\n}\r\n","import request from '@/utils/request'\r\nimport qs from 'querystring'\r\nimport {cookieLogin} from \"@/api/user\";\r\nimport {getToken} from \"@/utils/auth\";\r\nexport function getArticleList(start,offset) {\r\n  cookieLogin(JSON.parse(getToken()))\r\n  return request({\r\n    url:\"/getArticleList\",\r\n    method:\"post\",\r\n    data:qs.stringify({\r\n      start:start,\r\n      offset:offset,\r\n      aType:\"\"\r\n    })\r\n  })\r\n\r\n}\r\n\r\nexport function getArticlePages() {\r\n  return request({\r\n    url:\"/getArticlePages\",\r\n    method:\"post\",\r\n    data:qs.stringify({\r\n      aType:\"\"\r\n    })\r\n\r\n  })\r\n}\r\nexport function getArticleById(aId) {\r\n  cookieLogin(JSON.parse(getToken()))\r\n  return request({\r\n    url:\"/getArticleById\",\r\n    method:\"post\",\r\n    data:qs.stringify({\r\n      aId:aId\r\n    })\r\n  })\r\n}\r\n\r\nexport function saveArticle(article) {\r\n  cookieLogin(JSON.parse(getToken()))\r\n  return request({\r\n    url:\"/saveArticle\",\r\n    method:\"post\",\r\n    data:article\r\n  })\r\n}\r\nexport function deleteArticle(aId) {\r\n  cookieLogin(JSON.parse(getToken()))\r\n  return request({\r\n    url:\"/deleteArticle\",\r\n    method:\"post\",\r\n    data:qs.stringify({\r\n      aId:aId\r\n    })\r\n  })\r\n\r\n}\r\n\r\nexport function publishArticle(article) {\r\n  cookieLogin(JSON.parse(getToken()))\r\n  return request({\r\n    url:\"/publishArticle\",\r\n    method:\"post\",\r\n    data:article\r\n  })\r\n\r\n}\r\n\r\nexport function getArticleTimeCount() {\r\n  cookieLogin(JSON.parse(getToken()))\r\n  return request({\r\n    url:'/getArticleTimeCount',\r\n    method:'post',\r\n\r\n  })\r\n}\r\n\r\n\r\nexport function getAllType() {\r\n\r\n  return request({\r\n    url:\"/getAllType\",\r\n    method:\"post\"\r\n  })\r\n}\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=55c366c4&scoped=true&lang=css&\"","export function parseTime(timestamp) {\r\n  let t = Math.floor(new Date().getTime() / 1000)\r\n\r\n  t = t - timestamp\r\n  const day_num = Math.floor(t / (24 * 3600))\r\n  if (day_num >= 1) {\r\n    if (day_num > 30) {\r\n      return new Date(timestamp * 1000 + 8 * 3600 * 1000).toJSON().substr(0, 19).replace('T', ' ')\r\n    }\r\n    return day_num + '天前'\r\n  }\r\n  const hour = Math.floor(t / (3600))\r\n  if (hour >= 1) {\r\n    return hour + '小时前'\r\n  }\r\n  const minute = Math.floor(t / (60))\r\n\r\n  if (minute >= 1) {\r\n    return minute + '分钟前'\r\n  }\r\n  return '刚刚'\r\n}\r\n\r\nexport function computedTime(data) {\r\n  // debugger\r\n  const tmp = []\r\n  if (data.length === 0) {\r\n    return []\r\n  }\r\n  data.sort((function(p) {\r\n    return function(m, n) {\r\n      const a = new Date(m[p].replace(/-/g, '/')).getTime() / 1000\r\n      const b = new Date(n[p].replace(/-/g, '/')).getTime() / 1000\r\n      return a - b\r\n    }\r\n  })('time'))\r\n\r\n  const start = new Date(data[0]['time'].replace(/-/g, '/')).getTime() / 1000\r\n  const end = new Date().getTime() / 1000\r\n\r\n  for (let i = 0; i <= (end - start) / (3600 * 24); i++) {\r\n    const day = start + i * (3600 * 24)\r\n\r\n    if (data.length !== 0 && new Date(data[0]['time'].replace(/-/g, '/')).getTime() / 1000 === day) {\r\n      tmp.push(data[0])\r\n\r\n      data.splice(0, 1)\r\n    } else {\r\n      const tmp_day = new Date(day * 1000 + 8 * 3600 * 1000).toJSON().substr(0, 19).replace('T', ' ').split(' ')[0]\r\n      tmp.push({\r\n        count: 0,\r\n        time: tmp_day\r\n\r\n      })\r\n    }\r\n  }\r\n\r\n  return tmp\r\n}\r\n\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chart-container\"},[_c('chart',{attrs:{\"height\":\"100%\",\"width\":\"100%\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.className,style:({height:_vm.height,width:_vm.width}),attrs:{\"id\":_vm.id}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { debounce } from '@/utils'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      $_sidebarElm: null,\r\n      $_resizeHandler: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initListener()\r\n  },\r\n  activated() {\r\n    if (!this.$_resizeHandler) {\r\n      // avoid duplication init\r\n      this.initListener()\r\n    }\r\n\r\n    // when keep-alive chart activated, auto resize\r\n    this.resize()\r\n  },\r\n  beforeDestroy() {\r\n    this.destroyListener()\r\n  },\r\n  deactivated() {\r\n    this.destroyListener()\r\n  },\r\n  methods: {\r\n    // use $_ for mixins properties\r\n    // https://vuejs.org/v2/style-guide/index.html#Private-property-names-essential\r\n    $_sidebarResizeHandler(e) {\r\n      if (e.propertyName === 'width') {\r\n        this.$_resizeHandler()\r\n      }\r\n    },\r\n    initListener() {\r\n      this.$_resizeHandler = debounce(() => {\r\n        this.resize()\r\n      }, 100)\r\n      window.addEventListener('resize', this.$_resizeHandler)\r\n\r\n      this.$_sidebarElm = document.getElementsByClassName('sidebar-container')[0]\r\n      this.$_sidebarElm && this.$_sidebarElm.addEventListener('transitionend', this.$_sidebarResizeHandler)\r\n    },\r\n    destroyListener() {\r\n      window.removeEventListener('resize', this.$_resizeHandler)\r\n      this.$_resizeHandler = null\r\n\r\n      this.$_sidebarElm && this.$_sidebarElm.removeEventListener('transitionend', this.$_sidebarResizeHandler)\r\n    },\r\n    resize() {\r\n      const { chart } = this\r\n      chart && chart.resize()\r\n    }\r\n  }\r\n}\r\n","import request from '@/utils/request'\r\nimport { cookieLogin } from '@/api/user'\r\nimport { getToken } from '@/utils/auth'\r\n\r\nexport function getTouristTimeCount() {\r\n  cookieLogin(JSON.parse(getToken()))\r\n  return request({\r\n    url: '/getTouristTimeCount',\r\n    method: 'post'\r\n\r\n  })\r\n}\r\n","import request from '@/utils/request'\r\nimport { cookieLogin } from '@/api/user'\r\nimport { getToken } from '@/utils/auth'\r\n\r\nexport function getLookedTimeCount() {\r\n  cookieLogin(JSON.parse(getToken()))\r\n  return request({\r\n    url: '/getLookedTimeCount',\r\n    method: 'post'\r\n\r\n  })\r\n}\r\n","<template>\n  <div :id=\"id\" :class=\"className\" :style=\"{height:height,width:width}\" />\n</template>\n\n<script>\nimport echarts from 'echarts'\nimport resize from './mixins/resize'\nimport { getTimeCount } from '@/api/draft'\nimport { computedTime } from '@/utils/parseTime'\nimport { getArticleTimeCount } from '@/api/article'\nimport { getTouristTimeCount } from '@/api/tourist'\nimport { getLookedTimeCount } from '@/api/looked'\n\nexport default {\n  mixins: [resize],\n  props: {\n    className: {\n      type: String,\n      default: 'chart'\n    },\n    id: {\n      type: String,\n      default: 'chart'\n    },\n    width: {\n      type: String,\n      default: '200px'\n    },\n    height: {\n      type: String,\n      default: '200px'\n    }\n  },\n  data() {\n    return {\n      chart: null,\n      draft: [],\n      article: [],\n      tourist: [],\n      looked: [],\n      chartInfo: []\n\n    }\n  },\n  mounted() {\n    new Promise((resolve, reject) => {\n      getTimeCount().then(res => {\n        this.draft = computedTime(res.data)\n        resolve()\n      })\n    }).then(() => {\n      return new Promise((resolve, reject) => {\n        getTouristTimeCount().then(res => {\n          this.tourist = computedTime(res.data)\n          resolve()\n        })\n      })\n    }).then(() => {\n      return new Promise((resolve, reject) => {\n        getArticleTimeCount().then(res => {\n          this.article = computedTime(res.data)\n          resolve()\n        })\n      })\n    }).then(() => {\n      return new Promise((resolve, reject) => {\n        getLookedTimeCount().then(res => {\n          this.looked = computedTime(res.data)\n          resolve()\n        })\n      })\n    })\n\n      .then(() => {\n        this.polishing([this.tourist, this.article, this.draft, this.looked])\n        // console.log(this.article, this.draft)\n        // let o = {\n        //   l: this.draft.length > this.article.length ? this.draft.length : this.article.length,\n        //   o1: this.draft.length > this.article.length ? this.draft : this.article,\n        //   o2: this.draft.length > this.article.length ? this.article : this.draft,\n        //   o3: []\n        // }\n        // for (let i = 0; i < o.l; i++) {\n        //   if (o.o2.length !== 0 && o.o1[i]['time'] === o.o2[0]['time']) {\n        //     o.o3.push(o.o2[0])\n        //     o.o2.splice(0, 1)\n        //   } else {\n        //     o.o3.push({\n        //       time: o.o1[i]['time'],\n        //       count: 0\n        //     })\n        //   }\n        // }\n        // for (let i = 0; i < o.o3.length; i++) {\n        //   o.o2.push(o.o3[i])\n        // }\n        this.initChart()\n      })\n  },\n  beforeDestroy() {\n    if (!this.chart) {\n      return\n    }\n    this.chart.dispose()\n    this.chart = null\n  },\n  methods: {\n    initChart() {\n      const a = this.article\n      const d = this.draft\n      const t = this.tourist\n      const l = this.looked\n      this.chart = echarts.init(document.getElementById(this.id))\n      const xData = (function() {\n        const data = []\n        for (let i = 0; i < a.length; i++) {\n          data.push(a[i]['time'])\n        }\n        return data\n      }())\n      const article = (function() {\n        const data = []\n        for (let i = 0; i < a.length; i++) {\n          data.push(a[i]['count'])\n        }\n        return data\n      }())\n\n      const draft = (function() {\n        const data = []\n\n        for (let i = 0; i < d.length; i++) {\n          data.push(d[i]['count'])\n        }\n        return data\n      }())\n\n      const tourist = (function() {\n        const data = []\n\n        for (let i = 0; i < t.length; i++) {\n          data.push(t[i]['count'])\n        }\n        return data\n      }())\n      const looked = (function() {\n        const data = []\n\n        for (let i = 0; i < l.length; i++) {\n          data.push(l[i]['count'])\n        }\n        return data\n      }())\n      this.chart.setOption({\n        backgroundColor: '#344b58',\n        title: {\n          text: '博客数据',\n          x: '20',\n          top: '20',\n          textStyle: {\n            color: '#fff',\n            fontSize: '22'\n          },\n          subtextStyle: {\n            color: '#90979c',\n            fontSize: '16'\n          }\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            textStyle: {\n              color: '#fff'\n            }\n          }\n        },\n        grid: {\n          left: '5%',\n          right: '5%',\n          borderWidth: 0,\n          top: 150,\n          bottom: 95,\n          textStyle: {\n            color: '#fff'\n          }\n        },\n        legend: {\n          x: '5%',\n          top: '10%',\n          textStyle: {\n            color: '#90979c'\n          },\n          data: ['已发布', '未发布', '访问量', '浏览量']\n        },\n        calculable: true,\n        xAxis: [\n          {\n            type: 'category',\n            axisLine: {\n              lineStyle: {\n                color: '#90979c'\n              }\n            },\n            splitLine: {\n              show: false\n            },\n            axisTick: {\n              show: false\n            },\n            splitArea: {\n              show: false\n            },\n            axisLabel: {\n              interval: 0\n\n            },\n            data: xData\n          }],\n        yAxis: [\n          {\n            type: 'value',\n            splitLine: {\n              show: false\n            },\n            axisLine: {\n              lineStyle: {\n                color: '#90979c'\n              }\n            },\n            axisTick: {\n              show: false\n            },\n            axisLabel: {\n              interval: 0\n            },\n            splitArea: {\n              show: false\n            }\n          }],\n        dataZoom: [\n          {\n            show: true,\n            height: 30,\n            xAxisIndex: [\n              0\n            ],\n            bottom: 30,\n            start: 10,\n            end: 80,\n            handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',\n            handleSize: '110%',\n            handleStyle: {\n              color: '#d3dee5'\n\n            },\n            textStyle: {\n              color: '#fff'\n            },\n            borderColor: '#90979c'\n\n          }, {\n            type: 'inside',\n            show: true,\n            height: 15,\n            start: 1,\n            end: 35\n          }],\n        series: [\n          {\n            name: '已发布',\n            type: 'bar',\n            stack: 'total',\n            barMaxWidth: 35,\n            barGap: '10%',\n\n            itemStyle: {\n              normal: {\n                color: 'rgba(255,144,128,1)',\n                label: {\n                  show: true,\n                  textStyle: {\n                    color: '#fff'\n                  },\n                  // position: 'insideTop',\n                  formatter(p) {\n                    return p.value > 0 ? p.value : ''\n                  }\n                }\n              }\n            },\n            data: article\n          },\n\n          {\n            name: '未发布',\n            type: 'bar',\n            stack: 'total',\n            itemStyle: {\n              normal: {\n                color: 'rgba(0,191,183,1)',\n                barBorderRadius: 0,\n                label: {\n                  show: true,\n                  // position: 'top',\n                  formatter(p) {\n                    return p.value > 0 ? p.value : ''\n                  }\n                }\n              }\n            },\n            data: draft\n          },\n          {\n            name: '访问量',\n            type: 'line',\n            // stack: 'total',\n            symbolSize: 10,\n            symbol: 'circle',\n            itemStyle: {\n              normal: {\n                color: 'rgb(255,0,0)',\n                barBorderRadius: 0,\n                label: {\n                  show: false,\n                  // position: 'inside',\n                  formatter(p) {\n                    return p.value > 0 ? p.value : ''\n                  }\n                }\n              }\n            },\n            data: tourist\n          },\n          {\n            name: '浏览量',\n            type: 'line',\n            // stack: 'total',\n            symbolSize: 10,\n            symbol: 'circle',\n            itemStyle: {\n              normal: {\n                color: 'rgb(0,255,33)',\n                barBorderRadius: 0,\n                label: {\n                  show: false,\n                  // position: 'inside',\n                  formatter(p) {\n                    return p.value > 0 ? p.value : ''\n                  }\n                }\n              }\n            },\n            data: looked\n          }\n        ]\n      })\n    },\n    polishing(arr) {\n      const max = arr.reduce((a, b) => a.length > b.length ? a : b)\n      // console.log()\n      // debugger\n      arr.forEach(e => {\n        if (e.length === max.length) { return }\n        const gap = max.length - e.length\n        const tmp = max.slice(0, gap).reverse()\n        for (let i = 0; i < tmp.length; i++) {\n          e.splice(0, 0, {\n            count: 0,\n            time: tmp[i].time\n          })\n        }\n      })\n      console.log(arr)\n\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MixChart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MixChart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MixChart.vue?vue&type=template&id=6a657673&\"\nimport script from \"./MixChart.vue?vue&type=script&lang=js&\"\nexport * from \"./MixChart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"chart-container\">\r\n    <chart height=\"100%\" width=\"100%\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Chart from '@/components/Charts/MixChart'\r\n\r\nexport default {\r\n  name: 'MixChart',\r\n  components: { Chart }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chart-container{\r\n  position: relative;\r\n  width: 100%;\r\n  height: calc(100vh - 50px);\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=55c366c4&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=55c366c4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"55c366c4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}